import Image from 'next/image'

import HeaderBanners from './header_banners'
import Works from './works'
import FAQ from './faq'

import { getStats, getTeasers, getFAQ, getBanners, getProducts, getWorks } from '@/services/IndexPage'
// import CatalogObject from '@/components/catalog_object'


export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default async function Page() {
  const stats = await getStats();
  const teasers = await getTeasers();
  const faq = await getFAQ();
  const banners = await getBanners();
  const products = await getProducts();
  const works = await getWorks();

  return (
    <main className="relative bg-[#262626]">
      <HeaderBanners data={banners.data}/>
      
      <section className='section_aboutus relative'>
        <div className='section_header container m-auto'>
          <div className='header_line'></div>
          <h1>НЕМНОГО О НАШЕЙ <span>КОМПАНИИ!</span></h1>
        </div>
        <div className='aboutus_parts container m-auto'>
          <div className='aboutus_part1'>
            <div className='part1_left w-[50%]'>
              <h1>Команда профессионалов</h1>
              <h2>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.</h2>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat.</p>
            </div>
            <div className='part1_right w-[50%]'>
              <Image src='/images/command1.png' alt='' width={1650} height={700}/>
            </div>
          </div>
          <div className='aboutus_part2'>
            <div className='part2_left w-[50%]'>
              <Image src='/images/command2.png' alt='' width={1150} height={500}/>
            </div>
            <div className='part2_right w-[50%]'>
              <div className='part2_right_text'>
                <p>Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века.</p>
                <p>Lorem Ipsum - это текст-"рыба", часто используемый в печати в то время некий Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне.</p>
              </div>

              <div className='ratings'>
                {stats.data.map(stat => (
                  <div className='rating'>
                    <p><span>{stat.attributes.Count}{stat.attributes.Postfix_Name}</span></p>
                    <p>{stat.attributes.Name}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>

        <div className='absolute top-[-130px] left-[180px]'>
          <svg xmlns="http://www.w3.org/2000/svg" width="648" height="648" viewBox="0 0 648 648" fill="none">
            <g opacity="0.7" filter="url(#filter0_f_729_320)">
              <circle cx="324" cy="324" r="74" fill="#95F35A"/>
            </g>
            <defs>
              <filter id="filter0_f_729_320" x="0" y="0" width="648" height="648" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
                <feGaussianBlur stdDeviation="125" result="effect1_foregroundBlur_729_320"/>
              </filter>
            </defs>
          </svg>
        </div>

        <div className='absolute top-[260px] right-[0px]'>
          <svg xmlns="http://www.w3.org/2000/svg" width="298" height="696" viewBox="0 0 298 696" fill="none">
            <g filter="url(#filter0_f_707_447)">
              <ellipse cx="330" cy="348" rx="80" ry="98" fill="#95F35A"/>
            </g>
            <defs>
              <filter id="filter0_f_707_447" x="0" y="0" width="660" height="696" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
                <feGaussianBlur stdDeviation="125" result="effect1_foregroundBlur_707_447"/>
              </filter>
            </defs>
          </svg>
        </div>

        <div className='absolute bottom-[0px] left-[0px]'>
          <svg xmlns="http://www.w3.org/2000/svg" width="271" height="696" viewBox="0 0 271 696" fill="none">
            <g filter="url(#filter0_f_707_444)">
              <ellipse cx="-42" cy="348" rx="63" ry="98" fill="#95F35A"/>
            </g>
            <defs>
              <filter id="filter0_f_707_444" x="-355" y="0" width="626" height="696" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feBlend mode="normal" in="SourceGraphic" in2="BackgroundImageFix" result="shape"/>
                <feGaussianBlur stdDeviation="125" result="effect1_foregroundBlur_707_444"/>
              </filter>
            </defs>
          </svg>
        </div>
      </section>

      <section className='section_catalog'>
        <div className='section_header container m-auto'>
          <div className='header_line'></div>
          <h1>НАШ КАТАЛОГ</h1>
        </div>
        
        <div className='catalog_main container m-auto'>
          {products.data.map(product => (
            <div className='catalog_object'>
              <div className='object_photo'>
                <Image src={process.env.NEXT_PUBLIC_STRAPI_API_URL + product.attributes.image.data[0].attributes.url} alt='' width={364} height={320}></Image>
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
                  <path d="M1 8.625C1 4.04167 4.64583 3 6.72917 3C9.33333 3 11.4167 5.08333 12.4583 6.64583C13.5 5.08333 15.5833 3 18.1875 3C20.2708 3 23.9167 4.04167 23.9167 8.625C23.9167 15.5 12.4583 21.75 12.4583 21.75C12.4583 21.75 1 15.5 1 8.625Z" stroke="white" stroke-width="1.5"/>
                </svg>
              </div>
              <div className='object_desc'>
                <h1>{product.attributes.name}</h1>
                <p>{product.attributes.description}</p>
                <p>В наличии - {product.attributes.count} шт.</p>
                <div className='object_price'>
                  <p>{product.attributes.price}</p>
                  <p>₽</p>
                </div>
                <a href={product.attributes.slug + '/'}><button className='object_button1'>Подробнее</button></a>
              </div>
            </div>
          ))}
        </div>
        <a href='#' className='m-auto'>
          <button>
            Смотреть все товары
            <svg width="15" height="11" viewBox="0 0 15 11" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.30864 9.625L14 5.625M14 5.625L9.30864 1.625M14 5.625L0.518518 5.625" stroke="#95F35A" stroke-linecap="square"/>
            </svg>
          </button>
        </a>
      </section>
      
      <section className='section_reasons'>
        <div className='section_header container m-auto'>
          <div className='header_line'></div>
          <h1>6 ПРИЧИН СОТРУДНИЧАТЬ С НАМИ</h1>
        </div>

        <div className='reasons container m-auto'>
          {teasers.data.map(teaser => (
            <div className='reason'>
              <div className='reason_icon'>
                <Image src={process.env.NEXT_PUBLIC_STRAPI_API_URL + teaser.attributes.image.data.attributes.url} alt='' width={70} height={70}/>
              </div>

              <div className='reason_text'>
                <p><span>{teaser.attributes.header}</span></p>
                <p>{teaser.attributes.description}</p>
              </div>
            </div>
          ))}
        </div>
      </section>

      <Works data={works.data}/>

      <FAQ data={faq}/>

      <section className='section_contact pb-[150px]'>
        <div className='container m-auto'>
          <div className='section_header'>
            <div className='section_header_inside'>
              <div className='header_line'></div>
              <h1>ОСТАЛИСЬ <span>ВОПРОСЫ</span>?</h1>
            </div>
            <p className='under_header_text'>Оставьте заявку и мы свяжемся с вами в ближайшее время, чтобы ответить на все ваши вопросы!</p>
          </div> 

          <div className='contact_main mt-[40px]'>
            <div className='contact_inputs'>
              <div className='inputs_up'>
                <input placeholder='Ваше имя'></input>
                <input placeholder='Ваш телефон'></input>
                <input placeholder='Ваш e-mail'></input>
              </div>
              <div className='inputs_down'>
                <input placeholder='Распишите ваши вопросы'></input>
              </div>
            </div>
            <div className='contact_text'>
              <a href=''><button className='text_button'>Отправить</button></a>
              <div className='text_link'>
                <p>Нажимая на кнопку Отправить, я соглашаюсь с <a>офертой на обработку персональных данных.</a></p>
              </div>
            </div>
          </div>      
        </div> 
      </section>
    </main>
  )
}
